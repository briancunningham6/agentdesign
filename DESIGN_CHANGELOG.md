# Design Changelog

## 2026-01-18: Metal Nail Insert Design for Capsule Scraper

### Updates (Latest):
- **Bayonet tab clearance increased**: Reduced tab protrusion from 1.5mm to 1.35mm (0.15mm reduction) to provide clearance for nail heads
- **Nail hole placement optimized**: Minimum radius increased to 8.5mm to ensure no overlap with 14mm diameter bayonet shaft
- **Through-holes verified**: Nail holes now guaranteed to pass completely through the 13mm base thickness

### Problem
The original 3D-printed plastic pins on the Nespresso capsule scraper were too weak and would bend or break when piercing the aluminum foil on capsules.

### Solution
Replaced printed plastic pins with **metal nail inserts**. The scraper base now has precision holes designed for press-fitting standard 1.5mm brad nails.

### Design Changes

#### Old Design (Plastic Pins):
- 8× 3D-printed plastic pins (2.5mm diameter)
- Tapered tips for piercing
- 4mm reinforcement base
- Pins could bend/break when piercing aluminum foil

#### New Design (Metal Nail Inserts):
- 8× holes for metal brad nails (1.5mm diameter)
- Countersunk sockets (3.5mm diameter × 8mm deep) capture nail heads
- Tight friction-fit holes (1.4mm diameter) for 1.5mm nails
- 10mm reinforcement base for added strength
- Tapered transition guides nails into shaft holes

### Technical Specifications

**Nail Specifications:**
- Type: 1.5mm diameter brad nails or 18ga finish nails
- Length: 25-30mm
- Material: Steel (not aluminum)
- Quantity: 8 nails per scraper

**Hole Design:**
```
┌─────────────┐ ← Scraper base surface (Z=0)
│   Socket    │ ← 3.5mm diameter × 8mm deep (captures nail head)
│   ●   ●     │
│    ╲ ╱      │
│     ●       │ ← 2mm taper (guides nail into shaft hole)
│     │       │
│     │       │ ← 1.4mm diameter shaft hole (friction fit)
│     │       │    Passes completely through 13mm total thickness
│     │       │    (3mm base + 10mm reinforcement)
│     ▼       │
└─────────────┘ ← Bottom surface (Z=-13mm) - hole exits here
```

**Hole Placement:**
- Minimum radius: 8.5mm (clears 14mm bayonet shaft + 1.5mm margin)
- Maximum radius: 11.2mm (SCRAPER_BASE_DIAMETER/2.5)
- Pattern: Semi-random ring distribution for even coverage

**Interference Fit:**
- Nail diameter: 1.5mm
- Hole diameter: 1.4mm
- Interference: 0.1mm (creates tight press-fit)

**Bayonet Clearance:**
- Tab protrusion: 1.35mm (reduced from 1.5mm)
- Clearance for nail heads: 0.15mm additional space

### Benefits

1. **Strength**: Metal nails are far stronger than plastic pins
2. **Durability**: Won't bend, break, or wear down
3. **Performance**: Sharp metal points easily pierce aluminum foil
4. **Cost**: Brad nails are inexpensive ($3-5 for 1000)
5. **Availability**: Standard hardware store item
6. **Replaceable**: If a nail bends, just replace it

### Assembly Required

Users must now assemble the scraper by pressing metal brad nails into the holes:

1. Print the lid (integrated scraper on underside)
2. Purchase 1.5mm × 25-30mm brad nails (8 required)
3. Press nails into holes from the socket side
4. Nail heads sit flush in countersunk sockets
5. Friction fit holds nails securely

See [NAIL_ASSEMBLY_GUIDE.md](NAIL_ASSEMBLY_GUIDE.md) for detailed assembly instructions.

### Files Modified

- `scripts/generate_box.py`:
  - Updated capsule scraper pin section (lines 57-70)
  - Changed from solid pin extrusion to hole cutting
  - Added nail socket, taper, and shaft hole geometry
  - Increased reinforcement height from 4mm to 10mm
  - Updated variable name: `scraper_with_pins` → `scraper_with_holes`
  - Updated print statements to reflect nail insert design

### Backward Compatibility

The old plastic pin design can still be regenerated by:
1. Reverting the changes in `generate_box.py`
2. OR creating a separate generator script for plastic pin version
3. OR adding a command-line flag to choose between designs

The new nail insert design is now the default.

### Testing Recommendations

1. **Print test scraper** - verify hole dimensions are correct
2. **Test nail fit** - 1.5mm brad nails should press-fit snugly
3. **Verify socket depth** - nail heads should sit flush or slightly recessed
4. **Test piercing** - metal nails should easily pierce capsule foil
5. **Check retention** - nails should not pull out under normal use

### Future Improvements

Potential enhancements:
- Add optional glue channels in sockets for permanent nail retention
- Create alternative designs for different nail sizes (1.2mm, 2.0mm)
- Design a nail insertion jig for easier assembly
- Test with different metal materials (brass, stainless steel)

---

## Previous Changes

*Add earlier design revisions here*
